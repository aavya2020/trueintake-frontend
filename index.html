
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TrueIntake AI â€“ DSID Predictor</title>
</head>
<body style="font-family:sans-serif; padding:2rem; max-width:600px; margin:auto;">
  <h1>TrueIntake AI: Nutrient Content Predictor</h1>
  <p>Enter a nutrient name and label claim to estimate the actual amount based on DSID data.</p>

  <label>Nutrient Name:<br/>
    <input type="text" id="nutrient" placeholder="e.g., Vitamin B-6" style="width:100%; padding:0.5rem;"/>
  </label><br/><br/>

  <label>Label Claim Amount:<br/>
    <input type="number" id="label" placeholder="e.g., 50" style="width:100%; padding:0.5rem;"/>
  </label><br/><br/>

  <button onclick="getPrediction()" style="padding:0.75rem 1.5rem;">Predict</button><br/><br/>

  <div id="result" style="font-weight:bold;"></div>

  <script>
    async function getPrediction() {
      const nutrient = document.getElementById('nutrient').value;
      const label = document.getElementById('label').value;
      const resultBox = document.getElementById('result');

      if (!nutrient || !label) {
        resultBox.textContent = "Please enter both nutrient and label claim.";
        return;
      }

      try {
        const res = await fetch(`https://trueintake-dsid.onrender.com/predict?nutrient=${encodeURIComponent(nutrient)}&label_claim=${label}`);
        const data = await res.json();
        if (data.error) {
          resultBox.textContent = "Error: " + data.error;
        } else {
          resultBox.textContent = `Predicted Measured Amount: ${data.predicted_measured_amount}`;
        }
      } catch (e) {
        resultBox.textContent = "Prediction failed. Backend may be asleep or offline.";
      }
    }
  </script>
</body>
</html>
